<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Bare Pantry Recipe Finder</title>
	<link rel="stylesheet" href="css/style.css" type="text/css">
	<link rel="stylesheet" href="css/mobile.css" type="text/css">
	<script src="js/mobile.js" type="text/javascript"></script>
</head>
<body>
	<div id="page">
		<div id="header">
			<div>
				<a href="home.html" class="logo"><img src="images/newlogo.jpg" alt="Bare Pantry" style='height: 100%; width: 100%; object-fit: contain' align="bottom"></a>
				<ul id="navigation">
					<li>
						<a href="index.html">Home</a>
					</li>
					<li class="selected">
						<a href="search_form.html">Search</a>
					</li>
					<li>
						<a href="login_form.html">Login</a>
					</li>
					<li>
						<a href="about.html">About</a>
					</li>
				</ul>
			</div>
		</div>
		<div id="body">
			<div class="header">
				<div class="article">
					<ul>
						<ul>
							<blockquote>
							  <h3>Search by Name</h3>
							</blockquote>
							<blockquote>
								<form id="search_form" action="search_form.html" autocomplete="on" onload="recipeApi();">
								  <!-- puts a search box on the form -->
								  <input id="search" type="text" name="search" placeholder="Type Recipe Name Here">
								  <br><br>

								  <!-- this will call the POST to the server to search the db with this search string -->
								  <button type="submit" onclick="<!-- needs js function call here -->">Submit</button>
								</form>
							</blockquote>
						</ul>
                        <ul>
							<blockquote>
							  <h3>Search by Ingredient</h3>
							</blockquote>
							<blockquote>
								<form id="search_form" action="search_form.html" autocomplete="on">
								  <!-- puts a search box on the form -->
								  <input id="search" type="text" name="search" placeholder="Type Ingredient Name Here">
								  <br><br>
								  <!-- this will call the POST to the server to search the db with this search string -->
								  <button type="submit" onclick="<!-- needs js function call here -->">Submit</button>
								</form>
								<script>
								function recipeApi() {
								    var xmlHttp = new XMLHttpRequest();
								    var apiKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2NvdHQiLCJ1c2VybmFtZSI6InNuZWR2ZXNreSIsImlhdCI6MTQ5Mzc3MDkwOSwiZXhwIjoxNDk0MDMwMTA5fQ.K23ZJ3AZlfYMSjCIrJfymUEJDdBZVB47kXtEQAeVhOo';
								    var apiURL = 'http://kelseyrocklin-test.apigee.net/final/recipes';
								    xmlHttp.onreadystatechange = function() {
								        if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
								            recipeApiResponse(xmlHttp.responseText);
								        }
								    };
								    xmlHttp.open("GET", apiURL, true); // true for asynchronous
								    xmlHttp.send();
								}
								function recipeApiResponse(apiData) {
								    var data = JSON.parse(apiData);
								    var recipeTitle, rIngredients,rDirection;
								    for (i = 0; i < 4; i++) {
								        recipeTitle = data.recipes[i].title;
								        console.log(recipeTitle);
								        var cells = document.getElementsByTagName("td");
								        var cell = cells[i];
								        cell.innerText += recipeTitle;
								    }
								}

								</script>
							</blockquote>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div id="footer">
			<div class="connect">
				<div>
					<h1>Bare Pantry Recipes</h1>
				</div>
			</div>
			<div class="footnote">
				<div>
					<p>&copy; 2017 BY BP Inc. | ALL RIGHTS RESERVED</p>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
