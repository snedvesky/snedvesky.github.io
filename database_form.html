<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Bare Pantry Recipes</title>
	<link rel="stylesheet" href="css/style.css" type="text/css">
	<link rel="stylesheet" type="text/css" href="css/mobile.css">
	<script src="js/mobile.js" type="text/javascript"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script>
  $(function () {
      //alert('here1');
      var request = $.ajax({
          headers: {
              "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2NvdHQiLCJ1c2VybmFtZSI6InNuZWR2ZXNreSIsImlhdCI6MTQ5Mzc5MTIyNywiZXhwIjoxNDk0MDUwNDI3fQ.UwWkUa_XNRbtR-YbNDrq7DVWxpqhEkASf1qo5THScXY"
          },
          crossDomain: true,
          url: "http://kelseyrocklin-test.apigee.net/final/recipes",
          type: "GET",
          dataType: "json"
      });

      request.done(function (msg, textStatus, jqXHR) {
          //alert(jqXHR.getAllResponseHeaders());
         $('#response').text(JSON.stringify(msg));
		 responseThing(JSON.stringify(msg));
      });
	  
	  

      request.fail(function (jqXHR, textStatus, errorThrown) {
          alert('Request failed: ' + textStatus + ' ' + errorThrown);
          alert(jqXHR.responseJSON);
      });

      
  });
  
  function responseThing(recipeData) {
    var data = JSON.parse(recipeData);
    var articleURL, recipeTitle;
	var c = 0;
	var tr;
    for (var i = 0; i < recipeData.length; i++) {
        tr = $('<tr/>');
        tr.append("<td>" + data[i].title + "</td>");
        tr.append("<td>" + data[i].postedBy + "</td>");
        tr.append("<td>" + data[i].direction + "</td>");
		tr.append("<td>" + data[i].ingredients + "</td>");
        $('table').append(tr);
    }
    /*for (var i = 0; i < 1; i++) {
		
        recipeTitle = data[i].title;
		recipePoster = data[i].postedBy;
		recipeDirections = data[i].direction;
		recipeIngredients = data[i].ingredients;
		
        console.log(recipeTitle);
        var cells = document.getElementsByTagName("td");
        var cell = cells[i];
        cell.innerText += recipeTitle;
		
		console.log(recipePoster);
		var cells2 = document.getElementsByTagName("td");
		var cell2 = cells2[i+1];
		cell2.innerText += recipePoster;
		
		console.log(recipeDirections);
		var cells3 = document.getElementsByTagName("td");
		var cell3 = cells3[i+2];
		cell3.innerText += recipeDirections;
		
		console.log(recipeIngredients);
		var cells4 = document.getElementsByTagName("td");
		var cell4 = cells4[i+3];
		cell4.innerText += recipeIngredients;
	
        //console.log(recipePoster);
        //cells = document.getElementsByTagName("td");
        //cell = cells[i+1];
        //cell.innerText += recipePoster;
		//recipeDirections = data[i].direction;
        //console.log(recipeDirections);
        //cells = document.getElementsByTagName("td");
        //cell = cells[i+1];
        //cell.innerText = recipeDirections;
		
        //console.log(recipeIngredients);
        //cells = document.getElementsByTagName("td");
        //cell = cells[i+1];
        //cell.innerText += recipeIngredients;
    }*/
	
}
</script>

</head>
<body>
<div id="page">
		<div id="header">
			<div>
				<a href="index.html" class="logo"><img src="images/newlogo.jpg" alt="Bare Pantry" style='height: 100%; width: 100%; object-fit: contain' align="bottom"></a> 	
				<ul id="navigation">
					<li>
						<a href="index.html">Home</a>
					</li>
                    <li class="selected">
						<a href="database_form.html">Database</a>
					</li>
					<li>
						<a href="post_form.html">Post</a>
					</li>
					<!--<li>
						<a href="login_form.html">Login</a>	
					</li>-->
					<li>
						<a href="about.html">About</a>
					</li>
				</ul>
			</div>
		</div>
<div class="table-title">
<h3>Recipe Database</h3>
</div>
<table class="table-fill">
<thead>
<tr>
<th class="text-left">Name</th>
<th class="text-left">Posted By</th>
<th class="text-left">Directions</th>
<th class="text-left">Ingredients</th>
</tr>
</thead>
<tbody class="table-hover">

</tbody>
</table>

<!--
<div id="response">y</div>
<div id="response2">z</div>
-->

</body>
</html>
